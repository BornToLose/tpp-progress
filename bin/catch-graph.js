function qsFilter(t,a,e){return!(QueryString.day&&Duration.parse(t.Time,a.StartTime).TotalDays>parseFloat(QueryString.day)||QueryString.pokemon&&e>=parseInt(QueryString.pokemon))}$.when.apply($,Array.prototype.concat.apply([],tppData.filter(function(t){return 0==t.Name.indexOf("Season")}).map(function(t){return t.Runs.filter(function(t){return t.Scraper&&t.Scraper.pokemon||t.Events.filter(function(t){return"Pokemon"==t.Group}).length>0}).map(function(a){return $.when(a.Scraper?Scrape(a):a).then(function(a){Duration.parse(a.EndDate||a.Duration,a.StartTime).TotalSeconds>Date.now()/1e3-a.StartTime&&(a.Duration=(new Date).toISOString(),a.Ongoing=!0);var e={color:a.ColorPrimary,label:a.RunName,data:a.Events.filter(function(t){return"Pokemon"==t.Group&&"Egg"!=t.Name}).sort(function(e,r){return Duration.parse(e.Time,a.StartTime).TotalTime(t.Scale)-Duration.parse(r.Time,a.StartTime).TotalTime(t.Scale)}).filter(function(t,e){return qsFilter(t,a,e)}).map(function(t,e){return[Duration.parse(t.Time,a.StartTime).TotalTime(TPP.Scale.Days),e+1]})},r=Duration.parse(a.Duration,a.StartTime).TotalTime(TPP.Scale.Days);return QueryString.day&&r>parseFloat(QueryString.day)&&(r=parseFloat(QueryString.day)),e.data[e.data.length-1][0]<r&&(!QueryString.pokemon||e.data.length<parseInt(QueryString.pokemon))&&e.data.push([r,e.data.length]),e.data.unshift([0,0]),e})})}))).then(function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];console.dir(t);var e=null;$.plot($(".charts").css({width:"80vw",height:"80vh",margin:"auto"}).on("plothover",function(t,a,r){if(r){e=e||$('<div class="tooltip">').appendTo("body").css("position","absolute");var n=new Duration(0);n.TotalDays=r.datapoint[0];var o=r.series.label+"\n"+r.datapoint[1]+" Pokémon\n"+n.toString(TPP.Scale.Days);console.log(o),e.css({left:r.pageX,top:r.pageY}).attr("data-label",o).show()}else e&&e.hide()}),t,{legend:{backgroundOpacity:.5},grid:{hoverable:!0}});var r=$("<h3>").text('Pokédex "Owned" Over Time');$(".charts").append($("<div class='axisLabel'>").text("Days")).append($("<div class='axisLabel yaxisLabel'>").text("Pokémon")).append(r),QueryString.day&&r.append("<small>(First "+QueryString.day+" Days)</small>"),QueryString.pokemon&&r.append("<small>(First "+QueryString.pokemon+" Pokémon)</small>")});